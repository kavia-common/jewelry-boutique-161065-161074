{"is_source_file": true, "format": "JavaScript", "description": "This file implements order processing services for an e-commerce backend, including creating payment intents with Stripe, confirming payments, listing user orders, and retrieving specific order details.", "external_files": ["../repositories/orders", "../repositories/cart"], "external_methods": ["ordersRepo.getOrderWithItems", "ordersRepo.createOrder", "ordersRepo.insertOrderItems", "ordersRepo.setOrderStatus", "ordersRepo.listOrdersByUser", "ordersRepo.getOrderWithItems", "cartRepo.getCart", "cartRepo.clearCart"], "published": ["checkout", "confirm", "listMyOrders", "getOrder"], "classes": [], "methods": [{"name": "getStripe()", "description": "Initializes and returns a Stripe client using the secret key from environment variables.", "scope": "", "scopeKind": ""}, {"name": "checkout(userId)", "description": "Creates a Stripe PaymentIntent for the user's cart and persists an order in pending state.", "scope": "", "scopeKind": ""}, {"name": "confirm(userId, orderId, { payment_intent_id, status })", "description": "Confirms an order as paid based on Stripe payment intent status and optionally clears the cart.", "scope": "", "scopeKind": ""}, {"name": "listMyOrders(userId)", "description": "Lists all orders associated with the given user ID.", "scope": "", "scopeKind": ""}, {"name": "getOrder(userId, orderId)", "description": "Retrieves a specific user's order along with its items.", "scope": "", "scopeKind": ""}], "calls": ["getStripe", "cartRepo.getCart", "stripe.paymentIntents.create", "ordersRepo.createOrder", "ordersRepo.insertOrderItems", "ordersRepo.getOrderWithItems", "ordersRepo.setOrderStatus", "cartRepo.clearCart", "ordersRepo.listOrdersByUser"], "search-terms": ["stripe payment", "orders repository", "checkout process", "order confirmation", "user orders"], "state": 2, "file_id": 29, "knowledge_revision": 63, "git_revision": "", "ctags": [{"_type": "tag", "name": "Stripe", "path": "/home/kavia/workspace/code-generation/jewelry-boutique-161065-161074/backend/src/services/orders.js", "pattern": "/^const Stripe = require('stripe');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "cartRepo", "path": "/home/kavia/workspace/code-generation/jewelry-boutique-161065-161074/backend/src/services/orders.js", "pattern": "/^const cartRepo = require('..\\/repositories\\/cart');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "checkout", "path": "/home/kavia/workspace/code-generation/jewelry-boutique-161065-161074/backend/src/services/orders.js", "pattern": "/^  checkout,$/", "language": "JavaScript", "kind": "field", "scope": "module.exports", "scopeKind": "class"}, {"_type": "tag", "name": "checkout", "path": "/home/kavia/workspace/code-generation/jewelry-boutique-161065-161074/backend/src/services/orders.js", "pattern": "/^async function checkout(userId) {$/", "language": "JavaScript", "kind": "function", "signature": "(userId)"}, {"_type": "tag", "name": "confirm", "path": "/home/kavia/workspace/code-generation/jewelry-boutique-161065-161074/backend/src/services/orders.js", "pattern": "/^async function confirm(userId, orderId, { payment_intent_id, status }) {$/", "language": "JavaScript", "kind": "function", "signature": "(userId, orderId, { payment_intent_id, status })"}, {"_type": "tag", "name": "getOrder", "path": "/home/kavia/workspace/code-generation/jewelry-boutique-161065-161074/backend/src/services/orders.js", "pattern": "/^async function getOrder(userId, orderId) {$/", "language": "JavaScript", "kind": "function", "signature": "(userId, orderId)"}, {"_type": "tag", "name": "getStripe", "path": "/home/kavia/workspace/code-generation/jewelry-boutique-161065-161074/backend/src/services/orders.js", "pattern": "/^function getStripe() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "listMyOrders", "path": "/home/kavia/workspace/code-generation/jewelry-boutique-161065-161074/backend/src/services/orders.js", "pattern": "/^async function listMyOrders(userId) {$/", "language": "JavaScript", "kind": "function", "signature": "(userId)"}, {"_type": "tag", "name": "ordersRepo", "path": "/home/kavia/workspace/code-generation/jewelry-boutique-161065-161074/backend/src/services/orders.js", "pattern": "/^const ordersRepo = require('..\\/repositories\\/orders');$/", "language": "JavaScript", "kind": "constant"}], "hash": "65d90bb9bbfe543345e5d569bba20a2b", "format-version": 4, "code-base-name": "backend", "filename": "backend/src/services/orders.js", "fields": [{"name": "checkout,", "scope": "module.exports", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"63": ""}]}